<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="com.zfj.xmy.goods.persistence.pc.dao.PcOrderExMapper" >
  <resultMap id="BaseResultMap" type="com.zfj.xmy.goods.persistence.pc.pojo.dto.PcOrderDto" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="no" property="no" jdbcType="VARCHAR" />
    <result column="serial_number" property="serialNumber" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="BIGINT" />
    <result column="pay_type" property="payType" jdbcType="INTEGER" />
    <result column="pay" property="pay" jdbcType="DECIMAL" />
    <result column="actual" property="actual" jdbcType="DECIMAL" />
    <result column="total" property="total" jdbcType="DECIMAL" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="payment_name" property="paymentName" jdbcType="VARCHAR" />
    <result column="consignee_name" property="consigneeName" jdbcType="VARCHAR" />
    <result column="consignee_phone" property="consigneePhone" jdbcType="VARCHAR" />
    <result column="consignee_address" property="consigneeAddress" jdbcType="VARCHAR" />
    <result column="delivery_name" property="deliveryName" jdbcType="VARCHAR" />
    <result column="delivery_phone" property="deliveryPhone" jdbcType="VARCHAR" />
    <result column="delivery_method" property="deliveryMethod" jdbcType="INTEGER" />
    <result column="payment_status" property="paymentStatus" jdbcType="INTEGER" />
    <result column="ship_status" property="shipStatus" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="weight" property="weight" jdbcType="INTEGER" />
    <result column="acc_points" property="accPoints" jdbcType="BIGINT" />
    <result column="is_del" property="isDel" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="pay_time" property="payTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="send_time" property="sendTime" jdbcType="TIMESTAMP" />
    <result column="arrival_time" property="arrivalTime" jdbcType="TIMESTAMP" />
    <result column="parset_time" property="parsetTime" jdbcType="TIMESTAMP" />
    <result column="updator" property="updator" jdbcType="VARCHAR" />
    <result column="order_remark" property="orderRemark" jdbcType="VARCHAR" />
    <result column="business_remark" property="businessRemark" jdbcType="VARCHAR" />
    <result column="return_status" property="returnStatus" jdbcType="INTEGER" />
    <result column="return_reason" property="returnReason" jdbcType="VARCHAR" />
    <result column="goodsNum" property="goodsNum" jdbcType="INTEGER" />
    <result column="price" property="price" jdbcType="DECIMAL" />
  </resultMap>
  <!-- @auth lij @createTime 2017年7月31日20:41:52 查询商品的最新购买记录-->
  
  <select id="findGoodsDeal" parameterType="com.appdev.db.common.CriteriaParameter" resultMap="BaseResultMap">
  		select o.*,og.num as 'goodsNum',og.price as 'price' from order_goods og INNER JOIN `order` o on og.order_id=o.id
  		<if test="_parameter != null" >
	       <include refid="sqlcriteria.util.Example_Where_Clause" />
	    </if>
	    order by pay_time
  </select>
</mapper>